# 전역 변수의 문제점
## 변수의 생명 주기
### 전역 변수의 생명 주기
![전역변수의 생명주기](https://github.com/ljs5960/MyBookList/assets/54578316/5148802b-7772-48de-8947-0d777cdb22b8)
var 키워드로 선언한 전역 변수는 전역 객체의 프로퍼티가 된다. 브라우저 환경에서는 window가 전역 객체이기 때문에, var 키워드로 선언한 전역 변수는 window 객체의 프로퍼티가 되는 것이다. window객체의 경우 웹페이지를 닫기 전까지 유효하기 때문에, 전역 변수 또한 같은 생명주기를 갖게 된다.

## 전역 변수의 문제점
전역 변수는 크게 4가지 문제점이 있다.
- 암묵적 결합
- 긴 생명 주기
- 스코프 체인 상에서 종점에 존재
- 네임스페이스 오염
### 암묵적 결합
*모든 코드가 전역 변수를 참조하고 변경할수 있는 특징*을 뜻한다. 전역 변수 특성상 어디서든 참조하고 할당할 수 있기 떄문에, 가독성과 의도치 않은 동작에 악영향을 줄 수 있다.
### 긴 생명 주기
생명 주기가 짧아 금방 소멸되는 지역 변수와는 달리, 전역 변수는 금방 소멸되지 않아 더 오래 메모리 리소스를 소비한다. 더욱이 var 키워드는 변수의 중복 선언을 허용하므로 생명 주기가 긴 전역 변수 이름이 중복되어 재할당이 일어날 수 있다.
### 스코프 체인 상에서 종점에 존재
전역 변수는 스코프 체인 최상단에 존재한다. 이는 JS엔진의 스코프 엔진 탐색 제일 마지막에 검색되며, 미미하지만 검색 속도가 느려지는 문제가 발생한다.
### 네임스페이스 오염
파일이 분리되어 있어도 하나의 전역 스코프를 공유하는 JS의 문제점때문에 다른 파일에서 동일한 이름으로 명명된 전역 변수때문에 예상치 못한 결과를 가져올 수 있다.

## 전역 변수의 사용을 억제하는 방법
### 즉시 실행 함수
```javascript
(function () {
  var foo = 10;
} ());

console.log(foo); // ReferenceError: foo is not defined
```
단 한번만 호출되는 즉시 실행 함수는 함수 내부 변수의 스코프가 즉시 실행 함수의 지역변수르 설정된다.
### 네임스페이스 객체
```javascript
var MYAPP = {};

MYAPP.name = 'Lee';

console.log(MYAPP.name); // Lee
```
네임스페이스 역할을 담당할 객체를 전역으로 생성 후 전역처럼 사용하고 싶은 변수를 프로퍼티로 추가하는 방법. 네임스페이스를 분리하기 때문에 식별자 충돌을 막을수는 있으나, 네임스페이스 자체가 전역 변수로 할당되기 때문에 그닥 유용하지는 않음.
### 모듈 패턴
모듈 패턴이란 클래스처럼 관련있는 변수와 함수를 모아 즉시 실행 함수로 감싸 하나의 모듈을 만드는 패턴으로 클로저를 기반으로 동작한다.
```javascript
var Counter = (function () {
  var num = 0;

  return {
    increase() {
      return ++num;
    },
    decrease() {
      return --num;
    }
  }
}());

console.log(Counter.num); // undefined
console.log(Counter.increase()); // 1
console.log(Counter.increase()); // 2
console.log(Counter.decrease()); // 1
```
모듈 내부에서 반환하는 객체는 public member가 되며, 반환하지 않는 객체는 private member가 된다.
