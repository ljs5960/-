# 데이터 모델링
## 데이터 모델링의 이해
### 데이터 모델링의 특징
- **추상화**(Abstraction) : 현실 세계를 표기법에 맞게 간략히 표현
- **단순화**(Simplification) : 누구나 이해하도록 약속된 규약에 맞는 표기법 및 언어로 표현
- **명확화**(Clarity) : 의미가 명확히 한가지로 해석되어야 함

### 데이터 모델링의 단계
- **개념적 모델링**
    - 가장 높은 추상화 수준
    - 노트에 끄적거리는 수준의 모델링
    - ERD 작성
- **논리적 모델링**
    - 특정 DB에 종속되어 작성
    - 세부속성 등을 정확하게 표현
    - 데이터 정규화 완료
- **물리적 모델링**
    - 물리적인 저장까지 고려한 설계
    - 가장 구체적인 데이터 모델링

### ERD 작성 순서
1. 엔티티 도출
2. 엔티티 배치
3. 엔티티 관계 설정 (1:N, N:M 등)
4. 관계명 기술
5. 관계 참여도 기술
6. 관계 필수 여부 기술

### 데이터베이스 3단계 구조 특징
- 외부 스키마
    - *사용자 관점*의 표현
    - 응용프로그램이 접근하는 DB
- 개념 스키마
    - *개발자 관점*의 표현
    - 일반적인 '스키마' 단어는 개념스키마를 의미
- 내부 스키마
    - *DBA 관점*의 표현
    - DB가 어떻게 물리적 저장되는지 확인

## 엔터티
### 엔터티란?
- 데이터의 집합
- 개념, 사건 등의 명사
- *DB에서의 Table*

### 유형과 무형에 따른 분류
- 유형 엔터티
    - 물리적이며 지속적인 엔터티
    - 사원, 제품, 교수 등
- 개념 엔터티
    - 물리적이진 않지만 개념적으로 존재
    - 강의, 부서 등
- 사건 엔터티
    - 비즈니스 로직에 따라 발생되는 엔터티
    - 가장 데이터가 많음
    - 구매, 판매, 수납 등

## 속성
### 속성이란?
- 엔터티가 가지는 항목
- 업무에 필요한 데이터를 저장
- 매장 엔터티의 경우 주소, 전화번호 등이 속성

### 속성의 특징
- 속성은 업무에서 관리되는 정보
- 속성은 하나의 값만 가진다
- 주식별자에 함수적으로 종속

### 특성에 따른 속성의 종류
- 기본 속성
    - 비즈니스 로직에서 도출한 본래 속성
    - 이름, ID, 전화번호 등
- 설계 속성
    - 데이터 모델링 과정에서 발생되는 속성
    - 상품코드, 지점코드 등 (양념치킨 -> YC, 후라이드치킨 -> FC)
- 파생 속성
    - 다른 속성에 의해 만들어지는 속성
    - 합계, 평균 등 (판매 속성의 합을 통해 합계속성 도출)

## 관계
### 관계란?
- 엔티티간 논리적인 연관성

### 관계의 표기법
- 관계명
    - 엔티티가 참여하는 형태를 정의
    - 애매한 동사를 피하고 현재형으로 표현
    - 주문한다, 소속한다 등
- 관계차수
    - 1:1
    - 1:N
    - N:M
- 관계선택사항
    - 필수관계
        - 엔티티가 관계에 항상 참여
        - 사람과 주민등록번호 -> 모든 사람은 주민등록번호가 존재
    - 선택관계
        - 엔티티가 관계에 선택적 참여
        - 고객과 주문 -> 주문을 할수도 있고 안할수도 있음

## 식별자
### 식별자란?
- 엔터티를 대표하는 속성
- 하나의 엔터티는 반드시 *하나의 유일한* 식별자 존재
- 주민등록번호, 사원번호 등

### 주식별자의 특징
- 최소성
    - 주식별자를 구성하는 속성의 수는 유일성을 만족하는 최소의 수
- 존재성
    - 주식별자가 지정 되면 반드시 값이 존재해야함
- 유일성
    - 주식별자를 유일하게 구분할수 있어야 함
- 불변성
    - 향후에 변하지 않아야 함

### 키의 종류
- 기본키(Primary Key)
    - 후보키 중 엔터티를 대표하는 키
    - 학번
- 후보키(Candidate Key)
    - 유일성과 최소성을 만족하는 키
    - 학번, 전화번호, 주소
- 슈퍼키(Super Key)
    - 유일성은 만족하나 최소성을 만족하지 못하는 키
    - 전화번호, 주소
- 대체키(Alternate Key)
    - 기본키를 제외한 후보키
    - 전화번호, 주소
- 외래키(Foreign Key)
    - 타 테이블의 기본키를 가르키는 키

### 식별자 분류
- 내부식별자 vs 외부식별자
    - 내부식별자
        - 엔티티 내부에서 스스로 생성되는 식별자
        - 주민등록번호, 학번
    - 외부식별자
        - 다른 엔티티와 관계로 만들어지는 식별자
        - 구매(회원과 결제의 관계)
- 단일식별자 vs 복합식별자
    - 단일식별자
        - 하나의 속성으로 구성
        - 주민등록번호, 학번
    - 복합식별자
        - 다수의 속성으로 구성
        - 학년+반+번호
- 본질식별자 vs 인조식별자
    - 본질식별자
        - 비즈니스 로직에서 만들어지는 식별자
    - 인조식별자
        - 인위적으로 만들어지는 식별자

# 데이터 모델과 성능
## 정규화
### 정규화란?
- 데이터의 일관성, 최소한의 중복, 최대한의 유연성을 위한 방법
- 데이터를 분해하는 과정

### 이상현상
- 삽입이상 : 행 *삽입* 중 NULL값 삽입
- 갱신이상 : 데이터 *갱신* 중 일부 데이터만 갱신
- 삭제이상 : 행 *삭제* 중 원하지 않는 연쇄 삭제 발생

### 정규화의 단계
- 제1정규화
    - 테이블 내 속성의 원자성 확보
    - 1개 컬럼에 1개 값만 존재
- 제2정규화
    - 부분 함수 종속 제거
    - 테이블 내 기본키가 2개 이상 존재시 테이블 분리
- 제3정규화
    - 이행 함수 종속 제거
    - 특정 속성을 통해 다른 속성을 특징지을 경우 테이블 분리
- BCNF
- 제4정규화
- 제5정규화

## 반정규화
### 반정규화란?
- DB 성능향상을 위해 정규화를 지양하여 Join을 줄이는 방법
- 조회속도를 향상 시킬 수 있지만 데이터 모델의 유연성은 낮아짐
- 정규화를 수행하지 않는 *비정규화*와는 다른 개념

### 반정규화 기법
- 테이블 병합
- 테이블 분할
- 테이블 추가
- 중복컬럼추가
- 파생컬럼추가
- 중복관계추가

## 데이터베이스 구조
### 분산 데이터베이스의 투명성
- 분할 투명성 : 고객은 DB가 분할되어 저장됨을 알 필요가 없음
- 위치 투명성 : 고객은 DB의 위치를 알 필요가 없음
- 지역 사상 투명성 : 지역 시스템 이름과 무관한 이름 사용 가능
- 중복 투명성 : DB가 여러 시스템에 중복되어있어도 고객은 일관성있게 접근 가능
- 장애 투명성 : 특정 지역의 DB에 장애가 발생하더라도 데이터의 무결성 보장
- 병행 투명성 : 여러 고객이 동시에 트랜잭션 수행하더라도 결과에 이상 없어야 함